<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AegeanSwim - Find Perfect Swimming Beaches in the Aegean</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #ffffff 0%, #e0f2fe 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            padding: 20px 0;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(8, 145, 178, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        nav {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 28px;
            font-weight: 700;
            background: linear-gradient(135deg, #0891b2 0%, #0e7490 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-links {
            display: flex;
            gap: 30px;
            list-style: none;
            align-items: center;
        }

        .nav-links a {
            text-decoration: none;
            color: #333;
            font-weight: 500;
            transition: color 0.3s ease;
        }

        .nav-links a:hover {
            color: #0891b2;
        }

        .favorites-counter {
            background: #f59e0b;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-left: 5px;
        }

        /* Hero Section */
        .hero {
            padding: 80px 0 40px;
            text-align: center;
        }

        .hero h1 {
            font-size: 3.5rem;
            font-weight: 700;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #0c4a6e 0%, #0891b2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            line-height: 1.1;
        }

        .hero p {
            font-size: 1.25rem;
            color: #0369a1;
            margin-bottom: 40px;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        /* Beach Finder Section */
        .beach-finder {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(8, 145, 178, 0.15);
            margin: 0 auto 50px;
            max-width: 700px;
        }

        .beach-finder h3 {
            color: #0c4a6e;
            font-size: 1.8rem;
            margin-bottom: 30px;
            text-align: center;
        }

        .finder-form {
            display: grid;
            gap: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            color: #0369a1;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 14px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .form-group select,
        .form-group input {
            padding: 15px;
            border: 2px solid #e0f2fe;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            background-color: #f8fafc;
        }

        .form-group select:focus,
        .form-group input:focus {
            outline: none;
            border-color: #0891b2;
            background-color: white;
            box-shadow: 0 0 0 4px rgba(8, 145, 178, 0.1);
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        .find-beaches-btn {
            background: linear-gradient(135deg, #0891b2 0%, #0e7490 100%);
            color: white;
            padding: 18px 30px;
            border: none;
            border-radius: 12px;
            font-size: 18px;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .find-beaches-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(8, 145, 178, 0.3);
        }

        .find-beaches-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        /* Results Section */
        .results-section {
            margin-top: 40px;
            padding: 30px;
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border-radius: 16px;
            display: none;
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .results-title {
            color: #0c4a6e;
            font-size: 1.4rem;
            font-weight: 600;
        }

        .weather-info {
            background: rgba(255,255,255,0.9);
            padding: 12px 20px;
            border-radius: 10px;
            font-size: 14px;
            color: #0369a1;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .beach-results {
            display: grid;
            gap: 20px;
        }

        .beach-result {
            background: white;
            padding: 25px;
            border-radius: 16px;
            border-left: 5px solid #0891b2;
            transition: all 0.3s ease;
            position: relative;
        }

        .beach-result:hover {
            transform: translateX(5px);
            box-shadow: 0 10px 30px rgba(8, 145, 178, 0.15);
        }

        .top-recommendation {
            border-left-color: #10b981;
            border-left-width: 6px;
            background: linear-gradient(135deg, #f0fdf4 0%, #ffffff 100%);
        }

        .top-recommendation::before {
            content: "üèÜ BEST CHOICE";
            position: absolute;
            top: -12px;
            left: 20px;
            background: #10b981;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 11px;
            font-weight: 700;
            letter-spacing: 0.5px;
        }

        .beach-header {
            margin-bottom: 15px;
        }

        .beach-name {
            font-size: 1.3rem;
            font-weight: 600;
            color: #0c4a6e;
        }

        .beach-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(110px, 1fr));
            gap: 12px;
            margin-bottom: 15px;
        }

        .beach-metric {
            text-align: center;
            padding: 10px;
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-radius: 8px;
        }

        .metric-value {
            font-size: 1.1rem;
            font-weight: 700;
            color: #0891b2;
        }

        .metric-label {
            font-size: 11px;
            color: #64748b;
            text-transform: uppercase;
            letter-spacing: 0.3px;
            margin-top: 2px;
        }

        .beach-description {
            color: #64748b;
            line-height: 1.6;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e2e8f0;
        }

        .protection-badge {
            display: inline-block;
            padding: 5px 12px;
            background: #10b981;
            color: white;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            margin-left: 10px;
        }

        .protection-badge.moderate {
            background: #f59e0b;
        }

        .protection-badge.low {
            background: #ef4444;
        }

        /* Favorites Section */
        .favorites-section {
            background: white;
            padding: 40px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(8, 145, 178, 0.15);
            margin: 50px auto;
            max-width: 900px;
            display: none;
        }

        .favorites-section.has-favorites {
            display: block;
        }

        .favorites-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .favorites-title {
            color: #0c4a6e;
            font-size: 1.8rem;
            font-weight: 600;
        }

        .clear-favorites-btn {
            background: #ef4444;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .clear-favorites-btn:hover {
            background: #dc2626;
            transform: translateY(-1px);
        }

        .favorites-grid {
            display: grid;
            gap: 15px;
        }

        .favorite-item {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            padding: 15px;
            border-radius: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-left: 4px solid #f59e0b;
        }

        .favorite-info {
            flex: 1;
        }

        .favorite-island {
            color: #0891b2;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .favorite-beach {
            color: #0c4a6e;
            font-size: 1.1rem;
            font-weight: 600;
            margin-top: 2px;
        }

        .remove-favorite-btn {
            background: none;
            border: 2px solid #ef4444;
            color: #ef4444;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .remove-favorite-btn:hover {
            background: #ef4444;
            color: white;
            transform: rotate(90deg);
        }

        .donate-nav {
            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
            color: white !important;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
        }

        .donate-nav:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(245, 158, 11, 0.3);
        }

        /* Features Section */
        .features-section {
            padding: 60px 0;
            background: white;
            margin-top: 50px;
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .feature-card {
            text-align: center;
            padding: 30px;
            border-radius: 16px;
            background: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%);
            transition: all 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .feature-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .feature-title {
            color: #0c4a6e;
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .feature-description {
            color: #64748b;
            line-height: 1.5;
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .nav-links {
                gap: 15px;
                font-size: 14px;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .hero p {
                font-size: 1.1rem;
            }

            .beach-finder {
                padding: 25px;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .beach-details {
                grid-template-columns: repeat(2, 1fr);
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .results-header {
                flex-direction: column;
                align-items: stretch;
            }
        }

        /* Loading Animation */
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Toast Notification */
        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background: #10b981;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            display: none;
            animation: slideIn 0.3s ease;
            z-index: 1000;
        }

        .toast.show {
            display: block;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <header>
        <nav class="container">
            <div class="logo">
                <span>üåä</span>
                AegeanSwim
            </div>
            <ul class="nav-links">
                <li><a href="#finder">Find Beaches</a></li>
                <li><a href="#features">Features</a></li>
                <li><a href="#islands">Islands</a></li>
                <li><a href="#donate" class="donate-nav">üíù Donate</a></li>
            </ul>
        </nav>
    </header>

    <section class="hero" id="home">
        <div class="container">
            <h1>Find Perfect Swimming Beaches in the Aegean</h1>
            <p>üèñÔ∏è Never get caught in rough waters again! Our smart service analyzes real-time wind conditions and geographical protection to recommend the best beaches for swimming.</p>

            <div class="beach-finder" id="finder">
                <h3>üîç Find Your Perfect Beach Now</h3>
                <div class="finder-form">
                    <div class="form-group">
                        <label for="island-select">Choose Your Island</label>
                        <select id="island-select" required>
                            <option value="">Select an Aegean Island...</option>
                            <optgroup label="üèùÔ∏è Popular Cyclades">
                                <option value="mykonos">üéâ Mykonos</option>
                                <option value="santorini">üåã Santorini</option>
                                <option value="paros">‚õµ Paros</option>
                                <option value="naxos">üèñÔ∏è Naxos</option>
                                <option value="ios">üåÖ Ios</option>
                                <option value="milos">üíé Milos</option>
                            </optgroup>
                            <optgroup label="üåä Central Cyclades">
                                <option value="syros">üé≠ Syros</option>
                                <option value="tinos">‚õ™ Tinos</option>
                                <option value="andros">ü•æ Andros</option>
                                <option value="kea">ü¶Å Kea (Tzia)</option>
                                <option value="kythnos">‚ô®Ô∏è Kythnos</option>
                            </optgroup>
                            <optgroup label="üèñÔ∏è Small Cyclades">
                                <option value="amorgos">‚õ∞Ô∏è Amorgos</option>
                                <option value="folegandros">üèîÔ∏è Folegandros</option>
                                <option value="serifos">‚õèÔ∏è Serifos</option>
                                <option value="sifnos">üë®‚Äçüç≥ Sifnos</option>
                                <option value="sikinos">üåæ Sikinos</option>
                                <option value="antiparos">üï≥Ô∏è Antiparos</option>
                                <option value="koufonisia">üê† Koufonisia</option>
                                <option value="kimolos">üßÇ Kimolos</option>
                            </optgroup>
                            <optgroup label="‚öì Dodecanese">
                                <option value="rhodes">‚öîÔ∏è Rhodes</option>
                                <option value="kos">üåø Kos</option>
                                <option value="patmos">‚úùÔ∏è Patmos</option>
                                <option value="leros">üè• Leros</option>
                                <option value="kalymnos">üßΩ Kalymnos</option>
                            </optgroup>
                            <optgroup label="üå≤ North Aegean">
                                <option value="lesbos">ü´í Lesbos</option>
                                <option value="chios">üå∞ Chios</option>
                                <option value="samos">üç∑ Samos</option>
                                <option value="lemnos">üåã Lemnos</option>
                                <option value="thasos">üå≤ Thasos</option>
                            </optgroup>
                            <optgroup label="üè∫ Major Islands">
                                <option value="crete">üè∫ Crete</option>
                                <option value="skiathos">üå≤ Skiathos</option>
                                <option value="skopelos">üé¨ Skopelos</option>
                            </optgroup>
                        </select>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="date-select">Date</label>
                            <input type="date" id="date-select" required>
                        </div>
                        <div class="form-group">
                            <label for="time-select">Preferred Time</label>
                            <select id="time-select" required>
                                <option value="">Select time...</option>
                                <option value="early-morning">üåÖ Early Morning (6-9 AM)</option>
                                <option value="morning">‚òÄÔ∏è Morning (9-12 PM)</option>
                                <option value="midday">üåû Midday (12-3 PM)</option>
                                <option value="afternoon">üå§Ô∏è Afternoon (3-6 PM)</option>
                                <option value="evening">üåá Evening (6-8 PM)</option>
                            </select>
                        </div>
                    </div>

                    <button type="button" class="find-beaches-btn" id="findBeachesBtn">
                        üîç Find Perfect Beaches
                    </button>
                </div>

                <div class="results-section" id="resultsSection">
                    <div class="results-header">
                        <h4 class="results-title">üèñÔ∏è Recommended Swimming Beaches</h4>
                        <div class="weather-info" id="weatherInfo">
                            Loading weather data...
                        </div>
                    </div>
                    <div class="beach-results" id="beachResults">
                        <!-- Results will be populated here -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="donation-section" id="donate">
        <div class="container donation-container">
            <div class="donation-header">
                <h2 class="donation-title">Support AegeanSwim üíù</h2>
                <p class="donation-subtitle">Help us map every safe swimming spot in the Aegean Sea and keep this service free for everyone!</p>
            </div>

            <div class="donation-content">
                <div class="donation-info">
                    <h3><span>üéØ</span> What Your Donation Funds</h3>
                    <ul class="donation-list">
                        <li>Research trips to map 50+ more islands</li>
                        <li>Premium weather API for better accuracy</li>
                        <li>Mobile app development (iOS & Android)</li>
                        <li>Server costs to keep the service running</li>
                        <li>Local beach safety equipment donations</li>
                        <li>My dream Aegean research vacation üèñÔ∏è</li>
                    </ul>
                </div>

                <div class="donation-options">
                    <h3>Choose Your Support Level</h3>
                    <div class="donation-amount-grid">
                        <button class="amount-btn" onclick="donateAmount(5)">‚Ç¨5</button>
                        <button class="amount-btn" onclick="donateAmount(10)">‚Ç¨10</button>
                        <button class="amount-btn" onclick="donateAmount(25)">‚Ç¨25</button>
                        <button class="amount-btn" onclick="donateAmount(50)">‚Ç¨50</button>
                        <button class="amount-btn" onclick="donateAmount(100)">‚Ç¨100</button>
                        <button class="amount-btn" onclick="donateAmount(250)">‚Ç¨250</button>
                        <div class="custom-amount">
                            <input type="number" id="customAmount" placeholder="Custom amount ‚Ç¨" min="1">
                            <button class="amount-btn" onclick="donateCustom()">Donate</button>
                        </div>
                    </div>
                    
                    <div class="paypal-buttons">
                        <a href="https://www.paypal.com/donate" class="paypal-btn" id="paypalDonateBtn">
                            <span class="paypal-logo">PayPal</span>
                            Quick Donate
                        </a>
                    </div>
                </div>
            </div>

            <div class="progress-section">
                <div class="progress-header">
                    <div class="progress-title">üéØ 2025 Funding Goal</div>
                    <div class="progress-amount">‚Ç¨3,500 / ‚Ç¨10,000</div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill">
                        <span class="progress-percentage">35%</span>
                    </div>
                </div>
                <p class="progress-description">
                    We've mapped 30 islands so far! Help us reach our goal to cover all 227 inhabited Greek islands with swimming safety data. Every euro helps provide free beach safety information to thousands of swimmers.
                </p>
            </div>

            <div class="other-options">
                <h4>Other Ways to Support</h4>
                <div class="other-payment-methods">
                    <a href="#" class="payment-method" onclick="showPaymentInfo('bitcoin')">Bitcoin</a>
                    <a href="#" class="payment-method" onclick="showPaymentInfo('ethereum')">Ethereum</a>
                    <a href="https://ko-fi.com" class="payment-method" target="_blank">Ko-fi</a>
                    <a href="https://patreon.com" class="payment-method" target="_blank">Patreon</a>
                </div>
            </div>
        </div>
    </section>

    <section class="features-section" id="features">
        <div class="container">
            <h2 style="text-align: center; color: #0c4a6e; font-size: 2.5rem; margin-bottom: 20px;">Why AegeanSwim?</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">üå¨Ô∏è</div>
                    <h3 class="feature-title">Real-Time Wind Analysis</h3>
                    <p class="feature-description">Live weather data from Open-Meteo API analyzing wind patterns, Meltemi conditions, and swimming safety</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üó∫Ô∏è</div>
                    <h3 class="feature-title">30+ Islands Coverage</h3>
                    <p class="feature-description">Comprehensive database of 100+ beaches across Cyclades, Dodecanese, and North Aegean islands</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üõ°Ô∏è</div>
                    <h3 class="feature-title">Geographical Protection</h3>
                    <p class="feature-description">Advanced algorithms calculate wind shelter from cliffs, bays, and natural formations</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üéØ</div>
                    <h3 class="feature-title">Smart Recommendations</h3>
                    <p class="feature-description">AI-powered ranking system finds the best swimming conditions for your specific time and location</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üì±</div>
                    <h3 class="feature-title">Mobile Optimized</h3>
                    <p class="feature-description">Perfect for checking conditions on-the-go from your phone at the beach</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üíù</div>
                    <h3 class="feature-title">Community Supported</h3>
                    <p class="feature-description">Free service funded by beach lovers like you who believe in ocean safety for everyone</p>
                </div>
            </div>
        </div>
    </section>

    <div class="toast" id="toast"></div>

    <script>
        // Complete Beach Database (100+ beaches across 30+ islands)
        const beachDatabase = {
            // Main Cyclades
            mykonos: [
                { name: "Ornos Beach", lat: 37.4089, lon: 25.3264, protection: "high", meltemiShield: "excellent", description: "South-facing bay, completely sheltered from Meltemi winds. Perfect for families." },
                { name: "Platis Gialos", lat: 37.4026, lon: 25.3342, protection: "high", meltemiShield: "excellent", description: "Large sandy beach protected by natural bay formation. Water sports available." },
                { name: "Psarou Beach", lat: 37.4041, lon: 25.3288, protection: "moderate", meltemiShield: "good", description: "Famous beach with partial Meltemi protection. Luxury beach clubs." },
                { name: "Paradise Beach", lat: 37.4017, lon: 25.3367, protection: "low", meltemiShield: "poor", description: "Party beach, very exposed to north winds. Better for parties than swimming." },
                { name: "Super Paradise", lat: 37.4000, lon: 25.3400, protection: "moderate", meltemiShield: "moderate", description: "Famous party beach with some wind protection from surrounding hills." }
            ],
            santorini: [
                { name: "Kamari Beach", lat: 36.3845, lon: 25.4794, protection: "high", meltemiShield: "excellent", description: "East coast black sand beach, Mesa Vouno mountain blocks Meltemi perfectly." },
                { name: "Perissa Beach", lat: 36.3653, lon: 25.4806, protection: "high", meltemiShield: "excellent", description: "Protected by dramatic cliffs from northern winds. Black sand, crystal waters." },
                { name: "Red Beach", lat: 36.3486, lon: 25.3964, protection: "moderate", meltemiShield: "good", description: "Red cliffs provide natural windbreak. Unique volcanic landscape." },
                { name: "Vlychada Beach", lat: 36.3400, lon: 25.4300, protection: "high", meltemiShield: "excellent", description: "Lunar-like landscape with excellent wind protection. Marina nearby." }
            ],
            paros: [
                { name: "Parikia Beach", lat: 37.0857, lon: 25.1481, protection: "high", meltemiShield: "excellent", description: "West-facing town beach, Meltemi actually helps cool the area. Easy access." },
                { name: "Logaras Beach", lat: 37.0344, lon: 25.2047, protection: "high", meltemiShield: "excellent", description: "South coast gem, completely sheltered from Meltemi. Peaceful atmosphere." },
                { name: "Chrysi Akti", lat: 37.0214, lon: 25.2175, protection: "low", meltemiShield: "poor", description: "Famous windsurfing beach - avoid during strong Meltemi for swimming." },
                { name: "Farangas Beach", lat: 37.0167, lon: 25.2333, protection: "high", meltemiShield: "excellent", description: "Small south coast cove with excellent protection. Rock formations." }
            ],
            naxos: [
                { name: "Agia Anna", lat: 37.0536, lon: 25.3414, protection: "high", meltemiShield: "excellent", description: "Perfect family beach, south-west facing bay. Shallow waters." },
                { name: "Plaka Beach", lat: 37.0558, lon: 25.3647, protection: "moderate", meltemiShield: "moderate", description: "West coast - partially protected by dunes from Meltemi. Long sandy stretch." },
                { name: "Mikri Vigla", lat: 37.0147, lon: 25.3714, protection: "low", meltemiShield: "poor", description: "Prime kitesurfing spot - very windy during Meltemi season." },
                { name: "Agios Prokopios", lat: 37.0581, lon: 25.3458, protection: "high", meltemiShield: "excellent", description: "Award-winning beach with excellent protection. Crystal clear waters." }
            ],
            ios: [
                { name: "Mylopotas Beach", lat: 36.6833, lon: 25.3167, protection: "moderate", meltemiShield: "moderate", description: "Main beach, can get choppy during Meltemi. Long sandy beach." },
                { name: "Manganari Beach", lat: 36.6333, lon: 25.3500, protection: "high", meltemiShield: "excellent", description: "South coast paradise, completely protected from Meltemi. Crystal clear waters." },
                { name: "Koumbara Beach", lat: 36.7000, lon: 25.2667, protection: "moderate", meltemiShield: "good", description: "Secluded beach with moderate protection. Popular with locals." }
            ],
            milos: [
                { name: "Sarakiniko", lat: 36.7358, lon: 24.4456, protection: "moderate", meltemiShield: "good", description: "Unique white moon-like landscape. Some wind protection from rock formations." },
                { name: "Klima Beach", lat: 36.7250, lon: 24.4269, protection: "high", meltemiShield: "excellent", description: "Colorful fishing village bay, perfect Meltemi shelter. Photogenic houses." },
                { name: "Firopotamos", lat: 36.7167, lon: 24.4667, protection: "high", meltemiShield: "excellent", description: "Small cove with crystal waters, excellent protection. Traditional village." },
                { name: "Tsigrado Beach", lat: 36.6833, lon: 24.4833, protection: "high", meltemiShield: "excellent", description: "Hidden gem accessed by rope ladder. Complete wind protection." }
            ],
            syros: [
                { name: "Galissas Beach", lat: 37.4000, lon: 24.8833, protection: "high", meltemiShield: "excellent", description: "West coast bay with excellent Meltemi protection. Family-friendly." },
                { name: "Kini Beach", lat: 37.4333, lon: 24.8667, protection: "high", meltemiShield: "excellent", description: "Northwest facing bay, great sunset and Meltemi shelter. Tavernas." },
                { name: "Vari Beach", lat: 37.3833, lon: 24.9167, protection: "high", meltemiShield: "excellent", description: "Sheltered bay perfect during Meltemi season. Sandy beach." }
            ],
            tinos: [
                { name: "Kolympithra Beach", lat: 37.6167, lon: 25.1167, protection: "moderate", meltemiShield: "moderate", description: "Two connected bays, choose the calmer side based on wind direction." },
                { name: "Livada Beach", lat: 37.5833, lon: 25.1333, protection: "high", meltemiShield: "excellent", description: "South coast gem with excellent Meltemi protection. Long sandy beach." },
                { name: "Agios Fokas", lat: 37.5500, lon: 25.1833, protection: "moderate", meltemiShield: "good", description: "Southeast facing with partial wind protection. Close to town." }
            ],
            andros: [
                { name: "Batsi Beach", lat: 37.8667, lon: 24.7833, protection: "high", meltemiShield: "excellent", description: "West coast fishing village bay, perfect shelter from Meltemi. Restaurants." },
                { name: "Golden Beach", lat: 37.8333, lon: 24.9333, protection: "low", meltemiShield: "poor", description: "East coast - stunning but very windy during Meltemi. Better in calm conditions." },
                { name: "Agios Petros", lat: 37.8167, lon: 24.7667, protection: "high", meltemiShield: "excellent", description: "Southwest coast with natural windbreaks. Sandy beach." }
            ],
            kea: [
                { name: "Koundouros Beach", lat: 37.5833, lon: 24.2833, protection: "high", meltemiShield: "excellent", description: "Southwest bay completely sheltered from northern winds. Multiple coves." },
                { name: "Pisses Beach", lat: 37.6000, lon: 24.2667, protection: "moderate", meltemiShield: "good", description: "West coast with good Meltemi protection. Ancient ruins nearby." },
                { name: "Spathi Beach", lat: 37.5667, lon: 24.3833, protection: "high", meltemiShield: "excellent", description: "Remote southeast beach with excellent protection. Worth the drive." }
            ],
            kythnos: [
                { name: "Kolona Beach", lat: 37.4167, lon: 24.4167, protection: "moderate", meltemiShield: "good", description: "Double-sided beach, choose the sheltered side during Meltemi. Unique formation." },
                { name: "Episkopi Beach", lat: 37.3833, lon: 24.4333, protection: "high", meltemiShield: "excellent", description: "Southeast bay with natural wind protection. Sandy beach." },
                { name: "Flambouria Beach", lat: 37.3667, lon: 24.4500, protection: "high", meltemiShield: "excellent", description: "South coast hideaway, perfect during strong winds. Peaceful." }
            ],
            amorgos: [
                { name: "Agia Anna Beach", lat: 36.8333, lon: 25.8833, protection: "high", meltemiShield: "excellent", description: "South coast below famous Monastery, excellent protection from Meltemi." },
                { name: "Mouros Beach", lat: 36.8500, lon: 25.9167, protection: "moderate", meltemiShield: "moderate", description: "East coast with some wind exposure. Scenic location." },
                { name: "Kalotaritissa Bay", lat: 36.8167, lon: 25.8167, protection: "high", meltemiShield: "excellent", description: "Southwest bay with shipwreck. Complete wind protection." }
            ],
            folegandros: [
                { name: "Angali Beach", lat: 36.6167, lon: 24.9167, protection: "high", meltemiShield: "excellent", description: "South coast protected by high cliffs from Meltemi. Turquoise waters." },
                { name: "Livadaki Beach", lat: 36.6333, lon: 24.9000, protection: "high", meltemiShield: "excellent", description: "Hidden cove with excellent Meltemi shelter. Crystal clear waters." },
                { name: "Katergo Beach", lat: 36.6000, lon: 24.9333, protection: "high", meltemiShield: "excellent", description: "Remote beach accessible by boat or hike. Perfect wind protection." }
            ],
            serifos: [
                { name: "Psili Ammos", lat: 37.1500, lon: 24.4833, protection: "high", meltemiShield: "excellent", description: "South coast golden beach, perfectly sheltered from Meltemi. Fine sand." },
                { name: "Livadakia Beach", lat: 37.1667, lon: 24.5000, protection: "high", meltemiShield: "excellent", description: "Port beach with harbor protection from all winds. Easy access." },
                { name: "Ganema Beach", lat: 37.1833, lon: 24.4667, protection: "moderate", meltemiShield: "moderate", description: "West coast with moderate wind exposure. Popular beach." }
            ],
            sifnos: [
                { name: "Platis Gialos", lat: 36.9667, lon: 24.7167, protection: "high", meltemiShield: "excellent", description: "South coast bay with excellent Meltemi protection. Long sandy beach." },
                { name: "Faros Beach", lat: 36.9833, lon: 24.7500, protection: "moderate", meltemiShield: "good", description: "Southeast coast with lighthouse, some wind protection. Three connected beaches." },
                { name: "Vathy Beach", lat: 36.9500, lon: 24.6833, protection: "high", meltemiShield: "excellent", description: "Southwest bay completely sheltered during Meltemi. Traditional pottery village." }
            ],
            sikinos: [
                { name: "Alopronia Beach", lat: 36.6833, lon: 25.1167, protection: "high", meltemiShield: "excellent", description: "Port bay with excellent protection from northern winds. Relaxed atmosphere." },
                { name: "Agios Georgios", lat: 36.6667, lon: 25.1333, protection: "moderate", meltemiShield: "moderate", description: "East coast with some Meltemi exposure. Sandy beach." },
                { name: "Santorineika", lat: 36.6500, lon: 25.1000, protection: "high", meltemiShield: "good", description: "Southwest beach with good wind protection. Remote location." }
            ],
            antiparos: [
                { name: "Psaraliki Beach", lat: 37.0333, lon: 25.0833, protection: "high", meltemiShield: "excellent", description: "Southwest coast completely protected from Meltemi. Family beach." },
                { name: "Soros Beach", lat: 37.0167, lon: 25.0667, protection: "moderate", meltemiShield: "good", description: "South coast with partial wind protection. Popular spot." },
                { name: "Agios Spiridonas", lat: 37.0500, lon: 25.0667, protection: "high", meltemiShield: "excellent", description: "West coast bay sheltered from northern winds. Quiet beach." }
            ],
            koufonisia: [
                { name: "Pori Beach", lat: 36.9333, lon: 25.6000, protection: "moderate", meltemiShield: "moderate", description: "South coast with moderate Meltemi exposure. Natural pools." },
                { name: "Fanos Beach", lat: 36.9500, lon: 25.6167, protection: "high", meltemiShield: "good", description: "Southwest bay with good wind protection. Pristine waters." },
                { name: "Platia Pounta", lat: 36.9667, lon: 25.6333, protection: "low", meltemiShield: "poor", description: "East coast - very exposed to all winds. Swimming pools in rocks." }
            ],
            kimolos: [
                { name: "Prassa Beach", lat: 36.7833, lon: 24.5500, protection: "high", meltemiShield: "excellent", description: "Southwest coast with white sand, excellent Meltemi shelter. Unique white rocks." },
                { name: "Bonatsa Beach", lat: 36.8000, lon: 24.5667, protection: "moderate", meltemiShield: "good", description: "South coast with some wind protection. Clear waters." },
                { name: "Aliki Beach", lat: 36.8167, lon: 24.5833, protection: "low", meltemiShield: "poor", description: "Northeast coast - avoid during strong Meltemi. Salt lake behind beach." }
            ],
            // Dodecanese Islands
            rhodes: [
                { name: "Lindos Beach", lat: 36.0833, lon: 28.0833, protection: "high", meltemiShield: "excellent", description: "Famous bay below Acropolis, excellent protection from all winds. Historic setting." },
                { name: "Anthony Quinn Bay", lat: 36.3333, lon: 28.2167, protection: "high", meltemiShield: "excellent", description: "Sheltered cove on east coast, perfect during Meltemi. Crystal waters." },
                { name: "Tsambika Beach", lat: 36.2167, lon: 28.1500, protection: "moderate", meltemiShield: "good", description: "East coast golden beach with partial wind protection. Monastery above." },
                { name: "Prasonisi", lat: 35.8833, lon: 27.7500, protection: "low", meltemiShield: "poor", description: "Windsurfing paradise - very windy, avoid for swimming during Meltemi." }
            ],
            kos: [
                { name: "Kefalos Beach", lat: 36.7667, lon: 26.9333, protection: "moderate", meltemiShield: "moderate", description: "Southwest peninsula with moderate Meltemi exposure. Sandy beach." },
                { name: "Paradise Beach", lat: 36.7333, lon: 26.9167, protection: "high", meltemiShield: "good", description: "South coast with volcanic rocks providing wind shelter. Bubble beach." },
                { name: "Agios Stefanos", lat: 36.7500, lon: 26.9500, protection: "high", meltemiShield: "excellent", description: "Southwest bay with ancient ruins and wind protection. Island view." }
            ],
            patmos: [
                { name: "Psili Ammos", lat: 37.2667, lon: 26.5667, protection: "high", meltemiShield: "excellent", description: "South coast golden beach, completely sheltered from Meltemi. Isolated paradise." },
                { name: "Agriolivado Beach", lat: 37.3167, lon: 26.5833, protection: "moderate", meltemiShield: "good", description: "Southwest coast with good wind protection. Organized beach." },
                { name: "Kampi Beach", lat: 37.3000, lon: 26.5500, protection: "high", meltemiShield: "excellent", description: "West coast bay perfect during strong winds. Rock formations." }
            ],
            leros: [
                { name: "Vromolithos Beach", lat: 37.1167, lon: 26.8500, protection: "high", meltemiShield: "excellent", description: "Southwest bay with perfect Meltemi protection. Sandy beach." },
                { name: "Panteli Beach", lat: 37.1500, lon: 26.8333, protection: "high", meltemiShield: "excellent", description: "West coast fishing village bay, well protected. Traditional tavernas." }
            ],
            kalymnos: [
                { name: "Myrties Beach", lat: 36.9500, lon: 26.9833, protection: "high", meltemiShield: "excellent", description: "West coast facing Telendos, excellent wind protection. Sunset views." },
                { name: "Masouri Beach", lat: 36.9667, lon: 26.9667, protection: "high", meltemiShield: "excellent", description: "West coast with dramatic cliffs providing shelter. Rock climbing area." }
            ],
            // North Aegean
            lesbos: [
                { name: "Skala Eressos", lat: 39.1333, lon: 25.9333, protection: "high", meltemiShield: "excellent", description: "Southwest coast with excellent protection from northern winds. Long beach." },
                { name: "Vatera Beach", lat: 39.0667, lon: 26.2333, protection: "high", meltemiShield: "good", description: "South coast long sandy beach with wind protection. 7km of sand." }
            ],
            chios: [
                { name: "Mavra Volia", lat: 38.1667, lon: 25.8833, protection: "high", meltemiShield: "excellent", description: "Southwest volcanic beach, excellent Meltemi shelter. Black pebbles." },
                { name: "Lithi Beach", lat: 38.1500, lon: 25.8667, protection: "high", meltemiShield: "excellent", description: "Southwest coast completely protected from northern winds. Quiet beach." }
            ],
            samos: [
                { name: "Psili Ammos", lat: 37.6333, lon: 26.8167, protection: "high", meltemiShield: "excellent", description: "Southwest peninsula, completely sheltered from Meltemi. Fine sand beach." },
                { name: "Potokaki Beach", lat: 37.6833, lon: 26.9000, protection: "moderate", meltemiShield: "good", description: "South coast near airport, good wind protection. Long beach." }
            ],
            lemnos: [
                { name: "Plathena Beach", lat: 39.8500, lon: 25.2167, protection: "high", meltemiShield: "excellent", description: "Southwest coast with excellent wind protection. Shallow waters." },
                { name: "Keros Beach", lat: 39.8667, lon: 25.1833, protection: "high", meltemiShield: "good", description: "Southwest bay sheltered from northern winds. Kitesurfing spot." }
            ],
            thasos: [
                { name: "Aliki Beach", lat: 40.5833, lon: 24.7333, protection: "high", meltemiShield: "excellent", description: "Southeast double bay with ancient marble quarries, excellent wind protection." },
                { name: "Paradise Beach", lat: 40.6333, lon: 24.6667, protection: "moderate", meltemiShield: "good", description: "South coast with partial wind shelter. Popular beach." },
                { name: "Marble Beach", lat: 40.5667, lon: 24.7500, protection: "high", meltemiShield: "excellent", description: "Southeast coast with unique marble formations providing wind shelter." }
            ],
            // Major Islands
            crete: [
                { name: "Balos Lagoon", lat: 35.5833, lon: 23.5833, protection: "high", meltemiShield: "excellent", description: "Northwest lagoon completely protected from all winds by peninsula. Paradise beach." },
                { name: "Elafonissi Beach", lat: 35.2667, lon: 23.5333, protection: "high", meltemiShield: "excellent", description: "Southwest pink sand lagoon, excellent wind protection. Shallow waters." },
                { name: "Falassarna Beach", lat: 35.4833, lon: 23.5833, protection: "moderate", meltemiShield: "moderate", description: "West coast with some Meltemi exposure but famous sunsets. Big waves possible." },
                { name: "Preveli Beach", lat: 35.1500, lon: 24.4667, protection: "high", meltemiShield: "excellent", description: "South coast palm forest river beach, completely sheltered. Unique landscape." }
            ],
            skiathos: [
                { name: "Koukounaries Beach", lat: 39.1333, lon: 23.4167, protection: "high", meltemiShield: "excellent", description: "Southwest golden beach backed by pine forest, excellent wind protection." },
                { name: "Banana Beach", lat: 39.1167, lon: 23.4333, protection: "high", meltemiShield: "excellent", description: "South coast beach with excellent shelter from northern winds. Two sections." },
                { name: "Lalaria Beach", lat: 39.2167, lon: 23.5000, protection: "low", meltemiShield: "poor", description: "North coast white pebble beach - very exposed to Meltemi. Boat access only." }
            ],
            skopelos: [
                { name: "Kastani Beach", lat: 39.0833, lon: 23.6833, protection: "high", meltemiShield: "excellent", description: "Southwest Mamma Mia beach, excellent protection from northern winds." },
                { name: "Panormos Beach", lat: 39.1167, lon: 23.6667, protection: "high", meltemiShield: "excellent", description: "Northwest bay completely sheltered from Meltemi. Pine trees." },
                { name: "Agnontas Beach", lat: 39.0833, lon: 23.7000, protection: "high", meltemiShield: "excellent", description: "Southeast fishing village bay, well protected. Traditional atmosphere." }
            ]
        };

        // Donation Functions
        function donateAmount(amount) {
            // Create PayPal donation URL with amount
            // Note: Replace 'YOUR_PAYPAL_EMAIL' with your actual PayPal email
            const paypalEmail = 'YOUR_PAYPAL_EMAIL@example.com';
            const currency = 'EUR';
            const businessName = 'AegeanSwim';
            
            // PayPal donation URL format
            const paypalUrl = `https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=${encodeURIComponent(paypalEmail)}&item_name=${encodeURIComponent(businessName + ' Donation')}&amount=${amount}&currency_code=${currency}`;
            
            window.open(paypalUrl, '_blank');
            showToast(`Opening PayPal for ‚Ç¨${amount} donation... Thank you! üíù`);
        }

        function donateCustom() {
            const customAmount = document.getElementById('customAmount').value;
            if (customAmount && customAmount > 0) {
                donateAmount(customAmount);
            } else {
                showToast('Please enter a valid amount');
            }
        }

        function showPaymentInfo(method) {
            const addresses = {
                bitcoin: 'BTC: 1A1zP1eP5QGefi2DMPTfTL5SLmv7DivfNa',
                ethereum: 'ETH: 0x742d6c8b4e9c4e5b4e9c4e5b4e9c4e5b4e9c4e5b'
            };
            
            if (addresses[method]) {
                navigator.clipboard.writeText(addresses[method].split(': ')[1]);
                showToast(`${method.charAt(0).toUpperCase() + method.slice(1)} address copied to clipboard!`);
            }
        }

        // Toast notification
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // Set default date
        document.addEventListener('DOMContentLoaded', function() {
            const dateInput = document.getElementById('date-select');
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            dateInput.value = tomorrow.toISOString().split('T')[0];
            dateInput.min = today.toISOString().split('T')[0];
            
            const maxDate = new Date(today);
            maxDate.setDate(maxDate.getDate() + 7);
            dateInput.max = maxDate.toISOString().split('T')[0];
            
            // Setup PayPal button with your email
            const paypalBtn = document.getElementById('paypalDonateBtn');
            // Replace with your actual PayPal donation link
            paypalBtn.href = 'https://www.paypal.com/donate/?hosted_button_id=YOUR_BUTTON_ID';
        });FavoritesCounter();
            showToast('Removed from favorites');
        }

        function clearAllFavorites() {
            if (confirm('Are you sure you want to clear all favorites?')) {
                favorites = [];
                localStorage.setItem('aegeanSwimFavorites', JSON.stringify(favorites));
                updateFavoritesCounter();
                showToast('All favorites cleared');
            }
        }

        function isFavorite(island, beach) {
            return favorites.some(f => f.island === island && f.beach === beach);
        }

        // Toast notification
        function showToast(message) {
            const toast = document.getElementById('toast');
            toast.textContent = message;
            toast.classList.add('show');
            setTimeout(() => toast.classList.remove('show'), 3000);
        }

        // Set default date
        document.addEventListener('DOMContentLoaded', function() {
            const dateInput = document.getElementById('date-select');
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(tomorrow.getDate() + 1);
            
            dateInput.value = tomorrow.toISOString().split('T')[0];
            dateInput.min = today.toISOString().split('T')[0];
            
            const maxDate = new Date(today);
            maxDate.setDate(maxDate.getDate() + 7);
            dateInput.max = maxDate.toISOString().split('T')[0];
            
            updateFavoritesCounter();
        });

        // Weather API function (using Open-Meteo)
        async function getWeatherData(lat, lon, date, time) {
            try {
                const timeMap = {
                    'early-morning': 7,
                    'morning': 10,
                    'midday': 13,
                    'afternoon': 16,
                    'evening': 19
                };
                const hour = timeMap[time] || 12;
                
                const url = `https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&hourly=temperature_2m,wind_speed_10m,wind_direction_10m,weather_code&timezone=Europe/Athens`;
                
                const response = await fetch(url);
                const data = await response.json();
                
                // Find the closest hour index
                const targetDateTime = new Date(date + 'T' + hour.toString().padStart(2, '0') + ':00');
                const hourIndex = data.hourly.time.findIndex(t => new Date(t) >= targetDateTime);
                
                if (hourIndex === -1 || !data.hourly.wind_speed_10m[hourIndex]) {
                    throw new Error('No weather data available');
                }
                
                const windSpeed = data.hourly.wind_speed_10m[hourIndex];
                const windDirection = data.hourly.wind_direction_10m[hourIndex];
                const temperature = data.hourly.temperature_2m[hourIndex];
                const weatherCode = data.hourly.weather_code[hourIndex];
                
                // Convert wind direction to text
                const directions = ['N', 'NE', 'E', 'SE', 'S', 'SW', 'W', 'NW'];
                const index = Math.round(windDirection / 45) % 8;
                const windDirectionText = directions[index];
                
                // Determine weather conditions
                const conditions = weatherCode < 3 ? 'Clear' : 
                                 weatherCode < 50 ? 'Partly Cloudy' :
                                 weatherCode < 70 ? 'Cloudy' : 
                                 weatherCode < 80 ? 'Rainy' : 'Stormy';
                
                return {
                    source: 'Open-Meteo',
                    windSpeed: Math.round(windSpeed * 10) / 10,
                    windDirection: windDirection,
                    windDirectionText: windDirectionText,
                    temperature: Math.round(temperature * 10) / 10,
                    conditions: conditions,
                    isMeltemi: windDirection >= 315 || windDirection <= 45 && windSpeed > 25
                };
            } catch (error) {
                // Fallback to demo data
                const isSummer = new Date().getMonth() >= 5 && new Date().getMonth() <= 8;
                const windSpeed = isSummer ? 15 + Math.random() * 20 : 8 + Math.random() * 12;
                const temperature = isSummer ? 25 + Math.random() * 8 : 20 + Math.random() * 6;
                
                return {
                    source: 'Demo Data',
                    windSpeed: Math.round(windSpeed * 10) / 10,
                    windDirection: 45,
                    windDirectionText: 'NE',
                    temperature: Math.round(temperature * 10) / 10,
                    conditions: 'Sunny',
                    isMeltemi: windSpeed > 25
                };
            }
        }

        function calculateWindProtection(beach, windDirection, windSpeed) {
            const protectionFactors = { 'high': 0.75, 'moderate': 0.45, 'low': 0.15 };
            const meltemiFactors = { 'excellent': 0.85, 'good': 0.60, 'moderate': 0.35, 'poor': 0.10 };
            
            const isMeltemiWind = (windDirection >= 315 || windDirection <= 45) && windSpeed > 20;
            const protectionFactor = isMeltemiWind ? 
                (meltemiFactors[beach.meltemiShield] || protectionFactors[beach.protection]) :
                protectionFactors[beach.protection];
            
            const effectiveWindSpeed = windSpeed * (1 - protectionFactor);
            
            return {
                effectiveWindSpeed: Math.round(effectiveWindSpeed * 10) / 10,
                originalWindSpeed: windSpeed,
                swimmingConditions: getSwimmingConditions(effectiveWindSpeed, isMeltemiWind),
                protectionScore: beach.protection,
                meltemiProtection: beach.meltemiShield,
                isMeltemiConditions: isMeltemiWind,
                swimmabilityScore: Math.max(10, Math.min(100, Math.round(100 - effectiveWindSpeed * 2.5))),
                windReduction: Math.round((1 - (effectiveWindSpeed / windSpeed)) * 100)
            };
        }

        function getSwimmingConditions(windSpeed, isMeltemi) {
            if (isMeltemi) {
                if (windSpeed <= 8) return 'Excellent';
                if (windSpeed <= 15) return 'Good';
                if (windSpeed <= 22) return 'Moderate';
                return 'Rough';
            } else {
                if (windSpeed <= 10) return 'Excellent';
                if (windSpeed <= 15) return 'Good';
                if (windSpeed <= 20) return 'Moderate';
                return 'Choppy';
            }
        }

        // Find beaches button handler
        document.getElementById('findBeachesBtn').addEventListener('click', async function() {
            const island = document.getElementById('island-select').value;
            const date = document.getElementById('date-select').value;
            const time = document.getElementById('time-select').value;
            
            if (!island || !date || !time) {
                showToast('‚ö†Ô∏è Please fill in all fields');
                return;
            }
            
            const btn = document.getElementById('findBeachesBtn');
            const resultsSection = document.getElementById('resultsSection');
            const beachResults = document.getElementById('beachResults');
            const weatherInfo = document.getElementById('weatherInfo');
            
            btn.disabled = true;
            btn.innerHTML = '<span class="loading-spinner"></span> Analyzing...';
            resultsSection.style.display = 'block';
            weatherInfo.textContent = 'Fetching real-time weather data...';
            beachResults.innerHTML = '<p style="text-align: center; color: #64748b;">Loading beach recommendations...</p>';
            
            const beaches = beachDatabase[island] || [];
            
            if (beaches.length === 0) {
                beachResults.innerHTML = '<p style="text-align: center; color: #64748b;">Beach data for this island is coming soon! üèñÔ∏è</p>';
                weatherInfo.textContent = 'Island not yet covered';
                btn.disabled = false;
                btn.innerHTML = 'üîç Find Perfect Beaches';
                return;
            }
            
            try {
                // Get weather data for all beaches
                const beachRecommendations = await Promise.all(
                    beaches.map(async (beach) => {
                        const weatherData = await getWeatherData(beach.lat, beach.lon, date, time);
                        const protection = calculateWindProtection(beach, weatherData.windDirection, weatherData.windSpeed);
                        return {
                            name: beach.name,
                            description: beach.description,
                            weather: weatherData,
                            protection: protection,
                            score: protection.swimmabilityScore,
                            island: island
                        };
                    })
                );
                
                // Sort by swimming score
                beachRecommendations.sort((a, b) => b.score - a.score);
                
                // Calculate average conditions
                const avgTemp = beachRecommendations.reduce((sum, beach) => sum + beach.weather.temperature, 0) / beachRecommendations.length;
                const isMeltemiDay = beachRecommendations.some(beach => beach.protection.isMeltemiConditions);
                const windInfo = `${Math.round(beachRecommendations[0].weather.windSpeed)} km/h ${beachRecommendations[0].weather.windDirectionText}`;
                
                // Update weather info
                weatherInfo.innerHTML = `
                    üå°Ô∏è ${Math.round(avgTemp)}¬∞C ‚Ä¢ ${beachRecommendations[0].weather.conditions} ‚Ä¢ 
                    üí® ${windInfo}
                    ${isMeltemiDay ? ' ‚Ä¢ <span style="color: #f59e0b; font-weight: 600;">‚ö†Ô∏è Meltemi Conditions</span>' : ''}
                    <br><small style="opacity: 0.8;">Data: ${beachRecommendations[0].weather.source}</small>
                `;
                
                // Display results
                beachResults.innerHTML = beachRecommendations.map((beach, index) => {
                    const isTopRecommendation = index === 0;
                    
                    return `
                        <div class="beach-result ${isTopRecommendation ? 'top-recommendation' : ''}">
                            <div class="beach-header">
                                <div class="beach-name">
                                    ${isTopRecommendation ? 'üèñÔ∏è ' : ''}${beach.name}
                                    <span class="protection-badge ${beach.protection.protectionScore}">
                                        ${beach.protection.swimmingConditions}
                                    </span>
                                </div>
                            </div>
                            <div class="beach-details">
                                <div class="beach-metric">
                                    <div class="metric-value">${beach.protection.effectiveWindSpeed} km/h</div>
                                    <div class="metric-label">Effective Wind</div>
                                </div>
                                <div class="beach-metric">
                                    <div class="metric-value">${Math.round(beach.weather.temperature)}¬∞C</div>
                                    <div class="metric-label">Temperature</div>
                                </div>
                                <div class="beach-metric">
                                    <div class="metric-value">${beach.protection.windReduction}%</div>
                                    <div class="metric-label">Wind Block</div>
                                </div>
                                <div class="beach-metric">
                                    <div class="metric-value">${beach.protection.meltemiProtection.toUpperCase()}</div>
                                    <div class="metric-label">Meltemi Shield</div>
                                </div>
                                <div class="beach-metric">
                                    <div class="metric-value">${beach.score}/100</div>
                                    <div class="metric-label">Swim Score</div>
                                </div>
                            </div>
                            <div class="beach-description">
                                ${beach.description}
                                ${beach.protection.originalWindSpeed > beach.protection.effectiveWindSpeed ? 
                                    `<br><strong style="color: #10b981;">üõ°Ô∏è Protection:</strong> Wind reduced from ${beach.protection.originalWindSpeed} to ${beach.protection.effectiveWindSpeed} km/h` : ''}
                            </div>
                        </div>
                    `;
                }).join('');
                
            } catch (error) {
                console.error('Error:', error);
                beachResults.innerHTML = '<p style="text-align: center; color: #ef4444;">Error loading beach data. Please try again.</p>';
                weatherInfo.textContent = 'Unable to fetch weather data';
            }
            
            btn.disabled = false;
            btn.innerHTML = 'üîç Find Perfect Beaches';
        });

        // Smooth scrolling for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const targetId = this.getAttribute('href');
                if (targetId === '#' || targetId === '') return;
                
                const target = document.querySelector(targetId);
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    </script>
</body>
</html>